<%- include('./partials/header') -%>

<section class="container text-center pt-1">
  <h3 class="text-center fw-bold p-3">Articles</h3>
  <div
    class="d-sm-flex justify-content-center align-items-center flex-column"
  >
    <div class="mb-4">
      <a
        href="../img/Newsletter_2024_Wintera.pdf"
        target="_blank"
        class="btn btn-primary text-center fs-4"
        id="newsletter-file"
        >See our Newsletter</a
      >
      <%# if (token) { %>
        <!-- <form
        id="newsletter-form"
        class="g-3 w-100 mx-auto py-3 px-4 border rounded bg-light shadow m-5"
      >
        <h3 class="text-center p-3">Upload Newsletter</h3>
        <div class="mb-3">
          <label for="formFile" class="form-label">Choose file path</label>
          <input class="form-control" type="file" id="formFile">
        </div>
        <div
          id="submit-btn-group"
          class="col-12 d-flex justify-content-center align-items-center"
        >
          <button type="submit" class="btn btn-primary w-100">Submit</button>
        </div>
      </form> -->
      <%# } %>
    </div>
  </div>
  <div class="row g-5 py-5">
    <% articles.forEach((article) => { %>
    <div class="col-lg-4 col-md-6 col-sm-1">
      <div
        class="card card-block bg-light h-100 text-center shadow mb-5 rounded"
      >
        <div class="card-body align-items-center justify-content-center">
          <h5 class="card-title"><%= article.title %></h5>
          <p class="card-text"><%= article.description %></p>
        </div>
        <div class="py-2 border-top text-light">
          <a
            target="_blank"
            href="<%= article.url %>"
            class="btn btn-primary text-center"
          >
          <img src="/img/eye-fill.svg" alt="view article">
          </a>
          <% if (token) { %>
          <a
            href="/news/update/<%= article._id %>"
            class="btn btn-info"
          >
            <img src="/img/pencil-square.svg" alt="edit article" />
          </a>
          <button
          type="button"
          class="btn btn-danger"
          data-bs-toggle="modal"
          data-bs-target="#deleteModal<%= article._id %>"
        >
          <img src="/img/trash3-fill.svg" alt="delete article" />
        </button>
        <div
          class="modal fade text-dark"
          id="deleteModal<%= article._id %>"
          tabindex="-1"
          aria-labelledby="exampleModalLabel"
          aria-hidden="true"
        >
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header bg-danger text-light">
                <h1 class="modal-title fs-5" id="exampleModalLabel">Delete Confirmation</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                Are you sure you want to delete this article? This action cannot be undone once deleted.
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <form action="/news/delete/<%= article.id %>?_method=DELETE" method="POST">
                  <button type="submit" class="btn btn-danger">Delete</button>
                </form>
              </div>
            </div>
          </div>
        </div>
          <% } %>
        </div>
      </div>
    </div>
    <% }); %>
  </div>
</section>
</main>
<%- include('./partials/footer') -%>
